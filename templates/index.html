<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Prediction</title>
  
  <!-- Bootstrap CSS CDN -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body class="bg-light">

  <div class="container py-5">
    <h1 class="mb-4 text-center">Image Camera vs Screen Classifier</h1>
    
    <!-- Upload form -->
    <form action="/predict" method="post" enctype="multipart/form-data" class="mx-auto" style="max-width: 400px;">
      <div class="mb-3">
        <label for="image" class="form-label">Take a photo or upload</label>
        <input 
          class="form-control" 
          type="file" 
          id="image" 
          name="file" 
          accept="image/*" 
          capture="environment"  
          required 
        />
      </div>
      <button type="submit" class="btn btn-primary w-100">Predict</button>
    </form>

    <!-- Result section -->
    {% if prediction %}
    <div class="mt-5 mx-auto" style="max-width: 600px;">
      <h3 class="mb-3">Prediction Results</h3>

      <div class="mb-4 text-center">
        <img src="{{ image_url }}" alt="Uploaded Image" class="img-fluid rounded" style="max-height: 300px;" />
      </div>

      <ul class="list-group mb-3">
        {% for model, score in prediction.individual_predictions.items() %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ model | capitalize }}:
            <span class="badge bg-secondary rounded-pill">{{ '%.2f' | format(score) }}</span>
          </li>
        {% endfor %}
      </ul>

      <div class="alert alert-info fs-5" role="alert">
        <strong>Final Prediction:</strong> {{ prediction.final_prediction | capitalize }}
      </div>

      <form action="/" method="get">
        <button type="submit" class="btn btn-secondary">Clear</button>
      </form>
    </div>
    {% endif %}

    {% if error %}
    <div class="alert alert-danger mt-4" role="alert">
      {{ error }}
    </div>
    {% endif %}

  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
